<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Discussion Portal</title>
  <link rel="stylesheet" href="disapp.css">
</head>
<body>
  <header>
    <h1>Discussion Portal</h1>
  </header>

  <div id="container">
      <div id="left-pane">
        <div class="top-controls">
          <button id="new-btn">New Question form</button>
          <input type="text" id="search" placeholder="search questions...">
        </div>
        <ul id="question-list"></ul>
      </div>

        <div id="right-pane">
            <div id="welcome-box">
              <h2>Welcome</h2>
              <p>Enter data</p>
              <form id="question-form">
                <input type="text" name="title" placeholder="Subject" required>
                <textarea name="description" placeholder="Question" required></textarea>
                <button type="submit">Submit</button>
              </form>
            </div>
            
            <div id="response">
              <h2>Question</h2>
              <div id="clicked"> </div>
                <button id="resolve">Resolve</button>

              <h2>Response</h2>
              <div id="submitted"> </div>


              <h4>Add response</h4>
              <form id="response-form">
                <input type="text" name="name" placeholder="name">
                <textarea name="answer" placeholder="your answer"></textarea>
                <button type="submit">Submit Respose</button>
              </form>

            </div>
             
        </div>
  </div>
 
  <script src="disapp.js"></script>
</body>
</html>

<script>
  const pastRides = <%- JSON.stringify(pastRides) %>;

  pastRides.forEach(ride => {
    createStarButton(ride._id, ride.starCount || 0);
  });

  function createStarButton(rideId, initialCount = 0) {
    const container = document.getElementById(`rating-${rideId}`);
    if (!container) return;

    const starBtn = document.createElement('button');
    starBtn.textContent = "ðŸ˜Š";

    const countSpan = document.createElement('span');
    countSpan.textContent = initialCount;

    starBtn.addEventListener('click', async () => {
      const res = await fetch(`/api/rides/${rideId}/star`, {
        method: 'POST'
      });
      const data = await res.json();
      countSpan.textContent = data.starCount;
    });

    container.appendChild(starBtn);
    container.appendChild(countSpan);
  }
</script>




<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Booked Rides</title>
  <link rel="stylesheet" href="/css/profilestyle.css">
</head>
<body>
  <%- include('partials/header.ejs') %>

  <main>
    <div id="one">
    <h2>Upcoming Rides</h2>
    <% if (upcomingRides.length>0){ %>
      <ul>
        <% upcomingRides.forEach(ride=>{%>
          <li class="ride-item">
            <strong><%=ride.location%> => <%=ride.destination%><br></strong>
            Date: <%= ride.date %>
          </li>
        <% }) %>
      </ul>
    <%}else{%>
      <div class="container">
        <img id="map" src="/img/map.jpg" alt="map">
        <h1>Your future travel plans will appear here.</h1>
        <p>Find the perfect ride from thousands of destinations, or publish to share your travel costs.</p>
    </div>
    <% } %>
</div>
<div id="two">
    <h2>Past Rides</h2>
    <% if (pastRides.length > 0) { %>
      <ul>
        <% pastRides.forEach(ride => { %>
          <li class="ride-item">
            <strong><%= ride.location %> => <%= ride.destination %><br></strong>
            Date: <%= ride.date %>
               <div class="rating">
                      <form action="/rating" method="POST">
                        <input type="hidden" value="<%=ride._id%>" name="rideId">
                        <input type="number" name="rating" placevalue="Rating" min="1" max="5">
                        <button type="submit">Submit</button>
                      </form>
               </div>
          </li>
        <% }) %>
      </ul>
    <% } else { %>
      <div class="container">
        <img id="map" src="/img/map.jpg" alt="map">
        <h1>Your traveled plans will appear here.</h1>
        <p>Find the perfect ride from thousands of destinations, or publish to share your travel costs.</p>
    </div>
    <% } %>
  </div>
  </main>
</body>
</html>
